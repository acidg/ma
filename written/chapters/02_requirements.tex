% !TeX root = ../main.tex

\chapter{Requirements}\label{chapter:requirements}
% TODO Perspective of: not implemented yet?
The primary idea of this paper is to develop a tool for automated detection of open source software in a codebase and by that uncover possible license infringements.
The requirements for the tool are described in this chapter.

\section{Detecting License Infringement}\label{section:requirements/detecting_infringement}
The first and primary use case of such a tool is to detect copy-pasted open source code and uncover licensing issues.
The biggest question arising here is: How much copied code is a license infringement?

Gabel and Su did some analysis regarding the uniqueness of code.
Their study \glqq revealed a general lack of uniqueness in software at levels of granularity equivalent to approximately one to seven lines of source code\grqq \cite{2010-gabel-su-source-code-uniqueness}.
Regarding that, the lower end of a clone which can be argued as a license infringement should be marked at 8 lines of code.

In the lawsuit case explained in \cite{mertzel2008copying}, 54 lines of code where found and judged as copied code.
Consequentially, a detected clone should be seen as a serious violation when it reaches the length of 54 lines of code.

Another question is which licenses are relevant for a detection.
This decides on whether specifically licensed open source code should be included in the index.

In the context of this work, licenses can be separated into three different categories:
Licenses which do not permit use at all or in the given environment.
This can be a Copyright, which is default when no license is declared.
Another example here are copy-left licenses, like the GNU Public License (GPL), which forces a user to license distribution of the derivative work only under the same license.

Another license category are licenses which allow modification and use with the condition that the derivative work has to notice about the used code.
Examples here are the Apache License or the MIT License.

One rather special category are licenses like the Unlicense, which allows use without any conditions, except the creator does not provide any warranties and can not be held responsible for any damages or other liabilities.

Regarding the purpose of the tool developed in this work, all licenses except the last category may be of interest since not listing the use of a source under a permissive license like MIT may already be seen as a violation.

\subsection{Guaranteed Detection of Directly Copied Code}\label{section:requirements/guaranteed_detection}
The tool should be able to detect code in a target codebase which is directly copied and meets the required length for a license infringement as defined in \autoref{section:requirements/detecting_infringement}.
The target codebase is the codebase of the system the code is copied into.
The detection tool has to contain the directly copied code's origin in it's database.
Directly copied in this context means copied without modification except whitespace formatting and additional or removed newlines.
Detection should be guaranteed for such a case.

\subsection{High Probability for Detecting Modified Code}\label{section:requirements/high_probability}
The probability of the tool to detect code, which has been copied but also slightly modified, should be high.
Modification of code can be done in various extend which compel to define this further.
Here, a slight modification means adding, removing or changing one statement in a copied block of code.
The probability for the tool to detect a block of code with a length as defined in \autoref{section:requirements/detecting_infringement} with such a slight modification should be higher than 50\% in the worst case. %TODO better definition?

\subsection{Detecting Old Versions of the Source System}\label{section:requirements/detecting_old_version}
Copying of code form a source codebase into a target codebase may have happened a long time ago.
The code in the source codebase may have changed in that time and therefore may not be seen as a copy anymore.
However, a possible license infringement still persists in correlation to the previous version.
Therefore it is important for the detection tool to recognize code which has been copied from a previous version of the source codebase.

\section{Performance}
Actually detecting copied code in a codebase is one part, doing it in manageable time and with finite memory is another.

\subsection{Managing Huge Amounts of Reference System Code}
The tool should be able to detect most open source software which may cause license infringements.
\autoref{section:requirements/detecting_infringment} showed that only licenses which can be used without any conditions are not relevant.
However, the use of such licenses seems rare.
In conclusion, quite all of open source code available on the Internet may be relevant and should be detected by the tool.
Therefore, the codebase is huge and easily covers several billion lines of code.
The tool should be able to handle those amounts of code even on consumer machines. %TODO other description for smaller machines?

\subsection{High Lookup Speed}
Scanning a codebase for copied code using the tool should be fast. %TODO more specific

\subsection{Update Instead of Rebuilding the Database}
Open source code available on the Internet may change over time.
When code of a codebase is changed, the Database of the tool which stores the data to find matches of copied code has to be updated.
The easiest solution would be to rebuild the database from scratch.
Since billion lines of code have to be crawled again, this could take quite long.
Instead it should be possible to update the database , when a codebase was changed.

\section{Confidentiality}
All of the use cases for the tool as described in \autoref{section:introduction/use_cases} require the user of the tool to present information about the codebase under test.
However, this may not be conform with the companies policy.
Therefore, there have to be some measures to maintain confidentiality.

\subsection{No Code Transfered to Server}
The simplest solution is not to send the code directly to the server, but in a format, where the code can not be reverse calculated

\subsection{Offline Solution With Possible Online Lookup upon Request}
Another solution is a offline lookup with restrictions.
